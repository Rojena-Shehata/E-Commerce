@model UserFormViewModel
@{
    ViewData["Title"] = "Edit";
}

    <div class="card mt-4">
        <div class="card-header  d-flex justify-content-between mt-2 mb-4 align-items-center p-3 rounded-3 shadow-sm bg-light border-start border-4 border-primary">
            <div>
                <h2 class="text-primary fw-bold mb-1">
                <span class="text-dark">
                    <i class="ti ti-user-circle"></i>
                </span>   @Model.DisplayName
                </h2>
                <p class="mb-0 mdi-format-color-text">

                    Manage @Model.UserName Roles
                </p>
            </div>
        </div>
        <div class="card-body">
            <form asp-action="Edit" method="post">
            @Html.AntiForgeryToken()

            <input type="hidden" asp-for="Id"/>
            <div class="pb-6">
                <label class="text-primary" asp-for="UserName">Username:</label>
            <input  asp-for="UserName" class="form-control" readonly/>
            </div>
            <div class="pb-10">
                <label class="text-primary" asp-for="Email">Email:</label>
            <input  asp-for="Email" class="form-control" readonly/>
            <input  asp-for="DisplayName" class="form-control" readonly hidden/>
            
            </div>
            <div class="pb-9"></div>
            <h4 class="border-4 text-primary">Select Roles:</h4>
            @for (int i = 0; i < Model.Roles.Count; i++)
            {
                <input asp-for="Roles[i].DisplayName" hidden readonly />
                <div class="form-check d-flex align-items-center gap-2">
                    <input asp-for="Roles[i].IsSelected"
                           class="form-check-input" />

                    <label class="form-check-label"
                           asp-for="Roles[i].IsSelected">
                        @Model.Roles[i].DisplayName
                    </label>
                </div>

                <span asp-validation-for="Roles[i].IsSelected"
                      class="text-danger"></span>
 
            }
                
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>

        <div class="card-footer d-flex flex-column flex-md-row gap-3 mt-4 pt-3 border-top ">
            <button type="submit" class="btn btn-primary flex-fill gap-2 order-1 order-md-2 h6">
                Save
            </button>
            <a asp-action="Index" class="btn btn-light flex-fill gap-2 order-2 order-md-1 h6">
                Cancel
            </a>


        </div>
        </form>

    </div>


@section Scripts{
        <partial name="_ValidationScriptsPartial" />
        <script>
                       $(function () {
                const token = $('input[name="__RequestVerificationToken"]').val();
                if (token) {
                    $.ajaxSetup({
                        headers: { 'RequestVerificationToken': token }
                    });
                }
            });
        </script>
}
