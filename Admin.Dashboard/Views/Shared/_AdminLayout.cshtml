@inject IAuthorizationService authorizationService
@{
    var currentController = ViewContext.RouteData.Values["controller"]?.ToString();
    var HaveAccessToViewRoles =(await authorizationService.AuthorizeAsync(User, Permission.Roles.View)).Succeeded;
    var HaveAccessToViewUsers = (await authorizationService.AuthorizeAsync(User, Permission.Users.View)).Succeeded;
    var HaveAccessToViewProducts = (await authorizationService.AuthorizeAsync(User, Permission.Products.View)).Succeeded;
    var HaveAccessToViewTypes = (await authorizationService.AuthorizeAsync(User, Permission.Types.View)).Succeeded;
    var HaveAccessToViewBrands = (await authorizationService.AuthorizeAsync(User, Permission.Brands.View)).Succeeded;
    var HaveAccessToViewOrders = (await authorizationService.AuthorizeAsync(User, Permission.Orders.View)).Succeeded;
}
<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="~/lib/simplebar/dist/simplebar.css" />
    <link rel="stylesheet" href="~/css/icons/tabler-icons/tabler-icons.css" />
    <link rel="stylesheet" href="~/css/styles.min.css" />

    <title>@ViewBag.Title</title>
</head>

<body>
    <div class="page-wrapper" id="main-wrapper" data-layout="vertical" data-navbarbg="skin6" data-sidebartype="full"
         data-sidebar-position="fixed" data-header-position="fixed">

        <!--  App Topstrip -->
        <div class="app-topstrip bg-dark py-6 px-3 w-100 d-lg-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center justify-content-center gap-5 mb-2 mb-lg-0">
                <a class="d-flex justify-content-center" href="#">
                    <h2 class="text-white mb-2 mb-lg-0 fs-5 text-center">Admin Dashboard</h2>
                    @* <img src="~/images/storeLogo.jpg" alt="logo" style="width:80px;height:40px;" /> *@
                </a>


            </div>

            <div class="d-lg-flex align-items-center gap-2">
                
                <div class="d-flex align-items-center justify-content-center gap-2">

                    <div class="dropdown d-flex">
                        <a class="btn btn-primary d-flex align-items-center gap-1 " href="javascript:void(0)" id="drop4"
                           data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="ti ti-shopping-cart fs-5"></i>
                            Orders
                            <i class="ti ti-chevron-down fs-5"></i>
                        </a>
                    </div>
                </div>
            </div>

        </div>
        <!-- Sidebar Start -->
        <aside class="left-sidebar ">
            <!-- Sidebar scroll-->
            <!--logo-->
            <div>
                
                <div class="brand-logo d-flex align-items-center justify-content-between">
                    <a href="./index.html" class="text-nowrap logo-img  navbar-brand brand-logo " >
                        <div class="logo-wrapper">
                        <img src="~/images/scaledLogo.PNG" alt="logo" class="logo" />
                        </div>
                    </a>
                     <div class="close-btn d-xl-none d-block sidebartoggler cursor-pointer" id="sidebarCollapse">
            <i class="ti ti-x fs-6"></i>
          </div>
                </div>
                <!-- Sidebar navigation-->
                <nav class="sidebar-nav flex-grow-1 overflow-y-auto scroll-sidebar" data-simplebar="">
                    <ul id="sidebarnav ">
                        <li class="nav-small-cap">
                            <iconify-icon icon="solar:menu-dots-linear" class="nav-small-cap-icon fs-4"></iconify-icon>
                            <span class="font-weight-bold hide-menu">Home</span>
                        </li>
                        <li class="sidebar-item">
                            <a class="sidebar-link @(currentController == "Home" ? "active" : "")" asp-controller="Home" asp-action="index" aria-expanded="false">
                                <i class="ti ti-atom"></i>
                                <span class="hide-menu">Dashboard</span>
                            </a>
                        </li>
                        <!-- ---------------------------------- -->
                        <!-- Security -->
                        <!-- ---------------------------------- -->
                        @if (HaveAccessToViewRoles || HaveAccessToViewUsers)
                        {
                            <li class="nav-small-cap">
                                <iconify-icon icon="solar:menu-dots-linear" class="nav-small-cap-icon fs-4"></iconify-icon>
                                <span class="font-weight-bold hide-menu">Security</span>
                            </li>
                        }
                        @if (HaveAccessToViewRoles)
                        {
                            <li class="sidebar-item">
                                <a class="sidebar-link justify-content-between  @(currentController == "Roles" ? "active" : "")"
                                asp-controller="Roles"asp-action="index" aria-expanded="false">
                                    <div class="d-flex align-items-center gap-3">
                                        <span class="d-flex">
                                            <i class="ti ti-aperture"></i>
                                        </span>
                                        <span class="hide-menu">Roles</span>
                                    </div>

                                </a>
                            </li>
                        }
                        @if (HaveAccessToViewUsers)
                        {
                            <li class="sidebar-item">
                                <a class="sidebar-link justify-content-between  @(currentController == "Users" ? "active" : "")"
                                asp-controller="Users" asp-action="index" aria-expanded="false">
                                    <div class="d-flex align-items-center gap-3">
                                        <span class="d-flex">
                                            <i class="ti ti-user-circle"></i>
                                        </span>
                                        <span class="hide-menu">Users</span>
                                    </div>

                                </a>
                            </li>
                        }
                        <!-- Store Management -->
                        @if (HaveAccessToViewBrands || HaveAccessToViewTypes || HaveAccessToViewProducts||HaveAccessToViewOrders)
                        {
                            <li class="nav-small-cap">
                                <iconify-icon icon="solar:menu-dots-linear" class="nav-small-cap-icon fs-4"></iconify-icon>
                                <span class="font-weight-bold hide-menu">Store Management</span>
                            </li>
                        }
                        @if (HaveAccessToViewProducts)
                        {
                            <li class="sidebar-item">
                                <a class="sidebar-link justify-content-between  @(currentController == "Products" ? "active" : "")"
                                asp-controller="Products" asp-action="index" aria-expanded="false">
                                    <div class="d-flex align-items-center gap-3">
                                        <span class="d-flex">
                                            <i class="ti ti-cards"></i>
                                        </span>
                                        <span class="hide-menu">Products</span>
                                    </div>

                                </a>
                            </li>
                        }
                        @if (HaveAccessToViewBrands)
                        {
                            <li class="sidebar-item">
                                <a class="sidebar-link justify-content-between  @(currentController == "Brands" ? "active" : "")"
                                   asp-controller="Brands" asp-action="index" aria-expanded="false">
                                    <div class="d-flex align-items-center gap-3">
                                        <span class="d-flex">
                                            <i class="ti ti-layout-grid"></i>
                                        </span>
                                        <span class="hide-menu">Brands</span>
                                    </div>

                                </a>
                            </li>
                        }
                        @if (HaveAccessToViewTypes)
                        {
                            <li class="sidebar-item">
                                <a class="sidebar-link justify-content-between  @(currentController == "Types" ? "active" : "")"
                                asp-controller="Types" asp-action="index" aria-expanded="false">
                                    <div class="d-flex align-items-center gap-3">
                                        <span class="d-flex">
                                            <i class="ti ti-qrcode"></i>
                                        </span>
                                        <span class="hide-menu">Types</span>
                                    </div>

                                </a>
                            </li>
                        }
                        @if (HaveAccessToViewOrders)
                        {
                            <li class="sidebar-item">
                                <a class="sidebar-link justify-content-between @(currentController == "Types" ? "active" : "")"
                                   asp-action="Index" asp-controller="Orders" aria-expanded="false">
                                    <div class="d-flex align-items-center gap-3">
                                        <span class="d-flex">
                                            <i class="ti ti-shopping-cart"></i>
                                        </span>
                                        <span class="hide-menu">Orders</span>
                                    </div>

                                </a>
                            </li>
                        }

                        
                    </ul>
                </nav>
                <!-- End Sidebar navigation -->
            </div>
            <!-- End Sidebar scroll-->
        </aside>
        <!--  Sidebar End -->
        <div class="body-wrapper">
            <!--  Header Start -->
            <header class="app-header">
                <nav class="navbar navbar-expand-lg navbar-light">
                    <ul class="navbar-nav">
                        
                        <li class="nav-item d-block d-xl-none">
                            <a class="nav-link sidebartoggler " id="headerCollapse" href="javascript:void(0)">
                                <i class="ti ti-menu-2"></i>
                            </a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link " href="javascript:void(0)" id="drop1" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="ti ti-bell"></i>
                                <div class="notification bg-primary rounded-circle"></div>
                            </a>
                            <div class="dropdown-menu dropdown-menu-animate-up" aria-labelledby="drop1">
                                <div class="message-body">
                                    <a href="javascript:void(0)" class="dropdown-item">
                                        Item 1
                                    </a>
                                    <a href="javascript:void(0)" class="dropdown-item">
                                        Item 2
                                    </a>
                                </div>
                            </div>
                        </li>
                    </ul>
                    <div class="navbar-collapse justify-content-end px-0" id="navbarNav">
                        <ul class="navbar-nav flex-row ms-auto align-items-center justify-content-end">

                            <li class="nav-item dropdown ">
                                
                                <a class="nav-link btn btn-light"
                                href="javascript:void(0)" id="drop2" data-bs-toggle="dropdown"
                                   aria-expanded="false">
                                   
                                    <img src="~/images/user.webp" alt="User" width="35" height="35" class="rounded-circle">
                                    
                                    
                                </a>
                                <div class="dropdown-menu dropdown-menu-end dropdown-menu-animate-up" aria-labelledby="drop2">
                                    <div class="message-body">
                                        <a href="javascript:void(0)" class="d-flex align-items-center gap-2 dropdown-item">
                                            <i class="ti ti-user fs-6"></i>
                                            <p class="mb-0 fs-3">My Profile</p>
                                        </a>
                                        <a href="javascript:void(0)" class="d-flex align-items-center gap-2 dropdown-item">
                                            <i class="ti ti-mail fs-6"></i>
                                            <p class="mb-0 fs-3">My Account</p>
                                        </a>
                                        <a href="javascript:void(0)" class="d-flex align-items-center gap-2 dropdown-item">
                                            <i class="ti ti-list-check fs-6"></i>
                                            <p class="mb-0 fs-3">My Task</p>
                                        </a>
                                        <a asp-action="Logout" asp-controller="Auth" class="btn btn-outline-danger mx-3 mt-2 d-block">Logout</a>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </nav>
            </header>
            <!--  Header End -->

            <div class="body-wrapper-inner">
                <div class="container-fluid">

    <div>
                        @Html.AntiForgeryToken()

                        @RenderBody()
    </div>
    </div>
    </div>
    </div>
    </div>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    <script src="~/js/sidebarmenu.js"></script>
    <script src="~/js/app.min.js"></script>
    <script src="~/js/dashboard.js"></script>
    <script src="~/lib/apexcharts/dist/apexcharts.min.js"></script>
    <script src="~/lib/simplebar/dist/simplebar.js"></script>
    
    <!-- solar icons -->
    <script src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.8/dist/iconify-icon.min.js"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
